# name: inference/experiments.test
# description: Iris dataset experiments
# groups: [Inference]

Source streamFloat FLOAT32 p1 FLOAT32 p2 FLOAT32 p3 FLOAT32 p4 FILE
TESTDATA/small/iris.csv

Source generatorIris8 UINT64 id FLOAT32 p1 FLOAT32 p2 FLOAT32 p3 FLOAT32 p4 FLOAT32 p5 FLOAT32 p6 FLOAT32 p7 FLOAT32 p8 GENERATOR
CONFIG/sources/generator_iris.yaml

SINK checksum TYPE Checksum FLOAT32 setosa FLOAT32 versicolor FLOAT32 virginica

MODEL iris_8512 TESTDATA/model/iris_8.onnx
FLOAT32 FLOAT32 FLOAT32 FLOAT32 FLOAT32 FLOAT32 FLOAT32 FLOAT32
FLOAT32 setosa FLOAT32 versicolor FLOAT32 virginica
BATCH_SIZE 512

SELECT setosa, versicolor, virginica
FROM (SELECT INFER_MODEL(iris_8512, (p1,p2,p3,p4,p5,p6,p7,p8)) FROM generatorIris8)
INTO checksum
----
40000000,52679999317
